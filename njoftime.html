<!doctype html> 
<html lang="sq">
<meta charset="utf-8" />
<title>Homepage – Njoftime | Euronews Albania</title>

<!-- Fonts + Tailwind + Alpine -->
<link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/alpinejs" defer></script>
<style>
  :root { --brand:#0B5ED7; --brand-2:#00B6FF; }
  html,body{ font-family: Inter, ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Apple Color Emoji","Segoe UI Emoji"; }
  .glass{ background:linear-gradient(180deg,rgba(255,255,255,.88),rgba(255,255,255,.76)); backdrop-filter:blur(10px); }
  .scroll-x{ scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch; }
  .snap{ scroll-snap-align:start; }
  .shimmer{ background:linear-gradient(90deg,#eef2f7 25%,#e6ebf2 37%,#eef2f7 63%); background-size:400% 100%; animation:shimmer 1.1s ease-in-out infinite }
  @keyframes shimmer{0%{background-position:100% 0}100%{background-position:0 0}}
  .chip{ @apply text-[11px] px-2 py-1 rounded-full border; }
</style>

<body class="bg-slate-50 text-slate-800" x-data="home()" x-init="init()">
  <main class="max-w-7xl mx-auto px-4 lg:px-6 py-6 space-y-6">

    <!-- HERO -->
    <section class="relative overflow-hidden rounded-3xl p-6 sm:p-8 shadow-sm border border-white/40 bg-gradient-to-br from-[color:var(--brand)] to-[color:var(--brand-2)] text-white">
      <!-- decorative blobs -->
      <div class="absolute -top-20 -right-16 w-72 h-72 rounded-full bg-white/10"></div>
      <div class="absolute -bottom-24 -left-24 w-[28rem] h-[28rem] rounded-full bg-white/10"></div>

      <div class="relative z-10 grid md:grid-cols-2 gap-6 items-center">
        <div>
          <p class="text-xs uppercase tracking-widest/relaxed opacity-80">Euronews Albania</p>
          <h1 class="mt-1 text-3xl sm:text-4xl font-extrabold leading-tight">Njoftime & Qendër pune</h1>
          <p class="mt-3 text-white/90 max-w-xl">
            Qëndro i përditësuar. Filtro sipas sektorit, shiko njoftimet e reja.
          </p>
          <div class="mt-4 flex flex-wrap gap-2">
            <a target="_parent" href="manual_telesales_perditesuar.html" class="px-3 py-2 rounded-xl bg-white/15 hover:bg-white/25 border border-white/25">➡️ Skript Biznes</a>
            <a target="_parent" href="manaxhimi-i-klienteve.html" class="px-3 py-2 rounded-xl bg-white/15 hover:bg-white/25 border border-white/25">🧭 Procedura</a>
            <a target="_parent" href="paketa-starter.html" class="px-3 py-2 rounded-xl bg-white/15 hover:bg-white/25 border border-white/25">🎁 Paketa</a>
          </div>
        </div>
        <div class="glass rounded-2xl p-4 sm:p-5 text-slate-800 shadow/10">
          <div class="text-sm font-semibold text-slate-600">Sot</div>
          <div class="mt-1 text-2xl font-bold" x-text="today"></div>
          <div class="mt-3 grid grid-cols-3 gap-2">
            <div class="bg-white rounded-xl border border-slate-200 p-3 text-center">
              <div class="text-[11px] text-slate-500">Telefonata</div>
              <div class="text-lg font-bold">—</div>
            </div>
            <div class="bg-white rounded-xl border border-slate-200 p-3 text-center">
              <div class="text-[11px] text-slate-500">Takime</div>
              <div class="text-lg font-bold">—</div>
            </div>
            <div class="bg-white rounded-xl border border-slate-200 p-3 text-center">
              <div class="text-[11px] text-slate-500">Oferta</div>
              <div class="text-lg font-bold">—</div>
            </div>
          </div>
          <p class="mt-2 text-[11px] text-slate-500">(*Integrimi me CRM mund të shtohet më vonë.)</p>
        </div>
      </div>
    </section>

    <!-- TOOLBAR -->
    <section class="bg-white rounded-2xl border border-slate-200 p-4 sm:p-5 shadow-sm">
      <div class="flex flex-col lg:flex-row gap-3 lg:items-center lg:justify-between">
        <div class="flex-1 flex items-center gap-2">
          <div class="flex items-center gap-2 px-3 py-2 border border-slate-200 rounded-xl bg-slate-50 w-full lg:w-[28rem]">
            <span>🔎</span>
            <input x-model.debounce.200ms="q" @input="apply()" placeholder="Kërko në titull ose përmbajtje…" class="bg-transparent outline-none text-sm w-full">
          </div>
          <button @click="reload()" class="px-3 py-2 text-sm rounded-xl border border-slate-200 hover:bg-slate-50">🔄 Rifresko</button>
        </div>
        <div class="flex items-center gap-2">
          <button class="px-3 py-1.5 rounded-full border text-sm"
            :class="tag==='' ? 'bg-[#E8F1FF] border-[color:var(--brand)] text-[color:var(--brand)]' : 'border-slate-200 text-slate-700 hover:bg-slate-50'"
            @click="setTag('')">Të gjitha</button>
          <template x-for="t in tags" :key="t">
            <button class="px-3 py-1.5 rounded-full border text-sm"
              :class="tag===t ? 'bg-[#E8F1FF] border-[color:var(--brand)] text-[color:var(--brand)]' : 'border-slate-200 text-slate-700 hover:bg-slate-50'"
              @click="setTag(t)" x-text="t"></button>
          </template>
          <div class="ml-2 hidden md:flex items-center gap-1 text-xs text-slate-500">
            <span>Shiko:</span>
            <button class="px-2 py-1 rounded-lg border"
              :class="view==='cards' ? 'border-[color:var(--brand)] text-[color:var(--brand)] bg-[#E8F1FF]' : 'border-slate-200'"
              @click="view='cards'">Cards</button>
            <button class="px-2 py-1 rounded-lg border"
              :class="view==='timeline' ? 'border-[color:var(--brand)] text-[color:var(--brand)] bg-[#E8F1FF]' : 'border-slate-200'"
              @click="view='timeline'">Timeline</button>
          </div>
        </div>
      </div>
    </section>

    <!-- PINNED CAROUSEL -->
    <template x-if="pinned.length">
      <section>
        <div class="text-sm font-semibold text-slate-600 mb-2">📌 Të fiksuara</div>
        <div class="overflow-x-auto scroll-x no-scrollbar">
          <div class="flex gap-4 min-w-full">
            <template x-for="n in pinned" :key="n.id">
              <article class="snap min-w-[280px] max-w-[360px] bg-white rounded-2xl border border-slate-200 p-5 shadow-sm hover:shadow-md transition">
                <div class="flex items-start justify-between gap-3">
                  <h3 class="font-semibold text-slate-900 line-clamp-2" x-text="n.title"></h3>
                  <span class="text-[11px] text-slate-500" x-text="timeAgo(n.ts)"></span>
                </div>
                <p class="text-sm text-slate-700 mt-2 line-clamp-4" x-text="n.body"></p>
                <div class="mt-3 flex items-center gap-2">
                  <span class="text-[11px] px-2 py-1 rounded-full border" :class="tagStyle(n.tag)" x-show="n.tag" x-text="n.tag"></span>
                  <span class="text-[11px] text-slate-400" x-show="n.author">nga <span x-text="n.author"></span></span>
                </div>
              </article>
            </template>
          </div>
        </div>
      </section>
    </template>

    <!-- LIST -->
    <section class="space-y-3">
      <div class="flex items-center justify-between">
        <div class="text-sm font-semibold text-slate-600">📰 Njoftimet e fundit</div>
        <div class="text-[11px] text-slate-500" x-text="lastUpdated ? ('Përditësuar: '+lastUpdated) : ''"></div>
      </div>

      <!-- loading -->
      <template x-if="loading">
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
          <div class="h-36 rounded-2xl shimmer"></div>
          <div class="h-36 rounded-2xl shimmer"></div>
          <div class="h-36 rounded-2xl shimmer hidden md:block"></div>
        </div>
      </template>

      <!-- cards -->
      <div x-show="!loading && view==='cards'">
        <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4">
          <template x-for="n in visible" :key="n.id">
            <article class="bg-white rounded-2xl border border-slate-200 p-5 shadow-sm hover:shadow-md hover:-translate-y-0.5 transition">
              <div class="flex items-start justify-between gap-3">
                <h3 class="font-semibold text-slate-900 text-[1.05rem] leading-snug" x-text="n.title"></h3>
                <div class="text-right">
                  <div class="text-[11px] text-slate-500" x-text="timeAgo(n.ts)"></div>
                  <div class="text-[11px] text-slate-400" x-text="fmt(n.ts)"></div>
                </div>
              </div>
              <p class="text-[.94rem] text-slate-700 mt-2 leading-relaxed line-clamp-4" x-text="n.body"></p>
              <div class="mt-3 flex items-center flex-wrap gap-2">
                <span class="text-[11px] px-2 py-1 rounded-full border" :class="tagStyle(n.tag)" x-show="n.tag" x-text="n.tag"></span>
                <span class="text-[11px] text-slate-400" x-show="n.author">nga <span x-text="n.author"></span></span>
              </div>
            </article>
          </template>
        </div>

        <!-- pagination -->
        <div class="mt-4 flex items-center justify-center gap-2" x-show="pages>1">
          <button class="px-2.5 py-1.5 text-sm rounded-lg border border-slate-200 hover:bg-slate-50"
                  :disabled="page===1" @click="page--; paginate()">‹</button>
          <div class="text-sm text-slate-600">Faqja <span class="font-semibold" x-text="page"></span> / <span x-text="pages"></span></div>
          <button class="px-2.5 py-1.5 text-sm rounded-lg border border-slate-200 hover:bg-slate-50"
                  :disabled="page===pages" @click="page++; paginate()">›</button>
        </div>
      </div>

      <!-- timeline -->
      <div x-show="!loading && view==='timeline'">
        <div class="relative pl-6">
          <div class="absolute left-2 top-0 bottom-0 w-px bg-slate-200"></div>
          <template x-for="n in filtered" :key="n.id">
            <div class="relative mb-5">
              <div class="absolute -left-[7px] top-1.5 w-3 h-3 rounded-full bg-[color:var(--brand)]"></div>
              <div class="bg-white rounded-xl border border-slate-200 p-4 shadow-sm">
                <div class="flex items-start justify-between gap-3">
                  <h3 class="font-semibold text-slate-900" x-text="n.title"></h3>
                  <div class="text-right">
                    <div class="text-[11px] text-slate-500" x-text="timeAgo(n.ts)"></div>
                    <div class="text-[11px] text-slate-400" x-text="fmt(n.ts)"></div>
                  </div>
                </div>
                <p class="text-[.95rem] text-slate-700 mt-2 leading-relaxed" x-text="n.body"></p>
                <div class="mt-2 flex items-center gap-2">
                  <span class="text-[11px] px-2 py-1 rounded-full border" :class="tagStyle(n.tag)" x-show="n.tag" x-text="n.tag"></span>
                  <span class="text-[11px] text-slate-400" x-show="n.author">nga <span x-text="n.author"></span></span>
                </div>
              </div>
            </div>
          </template>
        </div>
      </div>

      <!-- empty & error -->
      <div class="bg-white rounded-2xl border border-slate-200 p-8 text-center text-slate-600" x-show="!loading && filtered.length===0">
        S’ka njoftime që përputhen me kërkimin/filtërin.
      </div>
      <div class="text-sm text-red-600" x-show="error" x-text="error"></div>
    </section>

    <!-- RESURSE -->
    <section class="grid grid-cols-1 md:grid-cols-3 gap-4">
      <div class="bg-white rounded-2xl border border-slate-200 p-5 shadow-sm">
        <div class="text-sm font-semibold text-slate-600">Resurse</div>
        <div class="mt-2 flex flex-wrap gap-2">
          <a target="_parent" href="materiale-deck.html" class="px-3 py-2 rounded-xl border border-slate-200 hover:bg-slate-50">Deck</a>
          <a target="_parent" href="materiale-logo.html" class="px-3 py-2 rounded-xl border border-slate-200 hover:bg-slate-50">Logo & brand</a>
          <a target="_parent" href="materiale-case.html" class="px-3 py-2 rounded-xl border border-slate-200 hover:bg-slate-50">Case studies</a>
        </div>
      </div>
      <div class="bg-white rounded-2xl border border-slate-200 p-5 shadow-sm">
        <div class="text-sm font-semibold text-slate-600">FAQ të shpejta</div>
        <ul class="mt-3 list-disc ml-5 text-sm text-slate-700 space-y-1">
          <li>Si regjistroj një telefonatë? – <em>Procedura → Procesi i Telefonatës</em></li>
          <li>Si dërgoj ofertën? – <em>Procedura → Ofertimi & Kontraktimi</em></li>
          <li>Kontakt për IT? – <em>IT Helpdesk</em></li>
        </ul>
      </div>
      <div class="bg-white rounded-2xl border border-slate-200 p-5 shadow-sm">
        <div class="text-sm font-semibold text-slate-600">Kontakte</div>
        <ul class="mt-2 text-sm text-slate-700 space-y-1">
          <li>IT Helpdesk: <strong>it@euronews.al</strong></li>
          <li>Sales Ops: <strong>sales@euronews.al</strong></li>
          <li>HR: <strong>hr@euronews.al</strong></li>
        </ul>
      </div>
    </section>
  </main>

  <script>
    function home(){
      return {
        today:'', items:[], pinned:[], filtered:[], visible:[], tags:[],
        q:'', tag:'', view:'cards', loading:false, error:'', lastUpdated:'',
        page:1, pageSize:9, pages:1, timer:null,

        init(){ this.today = new Date().toLocaleDateString('sq-AL',{weekday:'long',day:'2-digit',month:'long',year:'numeric'}); this.fetch(); this.timer=setInterval(()=>this.fetch(), 300000); },
        async fetch(){
          this.loading=true; this.error='';
          try{
            const r = await fetch('./announcements.json', {cache:'no-store'});
            if(!r.ok) throw new Error('HTTP '+r.status);
            const data = await r.json();
            const sorted = data.slice().sort((a,b)=>(b.ts||0)-(a.ts||0));
            this.items = sorted;
            this.pinned = sorted.filter(x=>x.pinned===true);
            this.tags = Array.from(new Set(sorted.map(x=>x.tag).filter(Boolean)));
            this.apply();
            this.lastUpdated = new Date().toLocaleTimeString('sq-AL');
          }catch(e){ this.error = "S'u ngarkuan njoftimet. Kontrollo pages/announcements.json."; }
          this.loading=false;
        },
        apply(){
          let base = this.items;
          if(this.tag) base = base.filter(n=>n.tag===this.tag);
          const q = this.q.trim().toLowerCase();
          if(q) base = base.filter(n => (n.title||'').toLowerCase().includes(q) || (n.body||'').toLowerCase().includes(q));
          this.filtered = base;
          this.page = 1;
          this.paginate();
        },
        paginate(){
          this.pages = Math.max(1, Math.ceil(this.filtered.length/this.pageSize));
          const start = (this.page-1)*this.pageSize;
          this.visible = this.filtered.slice(start, start+this.pageSize);
        },
        setTag(t){ this.tag=t; this.apply(); },
        reload(){ this.fetch(); },
        timeAgo(ts){
          if(!ts) return '';
          const diff = Date.now()-Number(ts);
          const m=Math.floor(diff/60000), h=Math.floor(m/60), d=Math.floor(h/24);
          if(m<60) return `${m} min më parë`;
          if(h<24) return `${h} orë më parë`;
          return `${d} ditë më parë`;
        },
        fmt(ts){ try{ return ts? new Date(ts).toLocaleString('sq-AL') : '' }catch{ return '' } },
        tagStyle(tag){
          if(!tag) return 'bg-slate-50 text-slate-700 border-slate-200';
          const map={ Sales:'bg-emerald-50 text-emerald-700 border-emerald-200', HR:'bg-amber-50 text-amber-700 border-amber-200', Ops:'bg-indigo-50 text-indigo-700 border-indigo-200', IT:'bg-sky-50 text-sky-700 border-sky-200' };
          return map[tag] || 'bg-slate-50 text-slate-700 border-slate-200';
        }
      }
    }
  </script>
</body>
</html>
